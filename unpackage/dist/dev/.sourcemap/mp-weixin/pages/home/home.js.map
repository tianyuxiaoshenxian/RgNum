{"version":3,"sources":["webpack:///D:/小程序/RgNum/main.js","webpack:///D:/小程序/RgNum/pages/home/home.vue?b0d2","webpack:///D:/小程序/RgNum/pages/home/home.vue?54aa","webpack:///D:/小程序/RgNum/pages/home/home.vue?e428","webpack:///D:/小程序/RgNum/pages/home/home.vue?5950","webpack:///D:/小程序/RgNum/pages/home/home.vue","webpack:///D:/小程序/RgNum/pages/home/home.vue?5f70","webpack:///D:/小程序/RgNum/pages/home/home.vue?9cb1"],"names":["createPage","Page","data","userName","currentTime","socketTask","is_open_socket","isRotate","RegNum","hasLogin","hasRGstatus","newMyRegNum","components","wButton","updated","onMessage","res","console","log","methods","connectSocketInit","uni","connectSocket","url","BASE_URL","success","onOpen","send","onClose","closeSocket","close","fail","err","clickRequest","startLogin","that","VglobalData","isLogin","reLaunch","request","userInfo","method","$data","message","resultMsg","$message","created","beforeDestroy","onLoad"],"mappings":"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","file":"pages/home/home.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/home/home.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./home.vue?vue&type=template&id=39494270&\"\nvar renderjs\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"RgNum/pages/home/home.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=template&id=39494270&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport wButton from '../../components/watch-login/watch-button.vue'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tuserName:'',\n\t\t\tcurrentTime:'',\n\t\t\tsocketTask: null,\n\t\t\t// 确保websocket是打开状态\n\t\t\tis_open_socket: false,\n\t\t\tisRotate:false,\n\t\t\tRegNum:0,//挂号人数\n\t\t\thasLogin:false,//是否为登陆状态\n\t\t\thasRGstatus:false,//是否为预约成功状态\n\t\t\tnewMyRegNum:''//当前用户排号号码\n\t\t}\n\t},\n\tcomponents:{\n\t\twButton\n\t},\n\tupdated() {\n\t\tthis.socketTask.onMessage((res) => {\n\t\t\tconsole.log(\"收到服务器内容：\" + res.data);\n\t\t\tthis.RegNum = res.data\n\t\t});\n\t},\n\tmethods: {\n\t\t// getTime: function() {\n\t\t// \tlet yy = new Date().getFullYear();\n\t\t// \tlet mm = new Date().getMonth() + 1;\n\t\t// \tlet dd = new Date().getDate();\n\t\t// \tlet hh = new Date().getHours();\n\t\t// \tlet mf = new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();\n\t\t// \tlet ss = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();\n\t\t// \treturn yy + '年' + mm + '月' + dd + '日 ' + hh + ':' + mf + ':' + ss;\n\t\t// },\n\t\t// 进入这个页面的时候创建websocket连接【整个页面随时使用】\n\t\tconnectSocketInit() {\n\t\t\t// 创建一个this.socketTask对象【发送、接收、关闭socket都由这个对象操作】\n\t\t\tthis.socketTask = uni.connectSocket({\n\t\t\t\t// 【非常重要】必须确保你的服务器是成功的,如果是手机测试千万别使用ws://127.0.0.1:9099【特别容易犯的错误】\n\t\t\t\turl: \"ws://\"+this.BASE_URL+\"/websocket/manager\",\n\t\t\t\tsuccess(data) {\n\t\t\t\t\tconsole.log(\"websocket连接成功\");\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// 消息的发送和接收必须在正常连接打开中,才能发送或接收【否则会失败】\n\t\t\tthis.socketTask.onOpen((res) => {\n\t\t\t\tconsole.log(\"WebSocket连接正常打开中...！\");\n\t\t\t\tthis.is_open_socket = true;\n\t\t\t\t// 注：只有连接正常打开中 ，才能正常成功发送消息\n\t\t\t\tthis.socketTask.send({\n\t\t\t\t\tdata: \"uni-app发送一条消息\",\n\t\t\t\t\tasync success() {\n\t\t\t\t\t\tconsole.log(\"消息发送成功\");\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\t// 注：只有连接正常打开中 ，才能正常收到消息\n\t\t\t\tthis.socketTask.onMessage((res) => {\n\t\t\t\t\tconsole.log(\"收到服务器内容：\" + res.data);\n\t\t\t\t});\n\t\t\t})\n\t\t\t// 这里仅是事件监听【如果socket关闭了会执行】\n\t\t\tthis.socketTask.onClose(() => {\n\t\t\t\tconsole.log(\"已经被关闭了\")\n\t\t\t})\n\t\t},\n\t\t// 关闭websocket【离开这个页面的时候执行关闭】\n\t\tcloseSocket() {\n\t\t\tthis.socketTask.close({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tthis.is_open_socket = false;\n\t\t\t\t\tconsole.log(\"关闭成功\", res)\n\t\t\t\t},\n\t\t\t\tfail(err) {\n\t\t\t\t\tconsole.log(\"关闭失败\", err)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tclickRequest() {\n\t\t\tif (this.is_open_socket) {\n\t\t\t\t// websocket的服务器的原理是:发送一次消息,同时返回一组数据【否则服务器会进去死循环崩溃】\n\t\t\t\tthis.socketTask.send({\n\t\t\t\t\tdata: \"请求一次发送一次message\",\n\t\t\t\t\tasync success() {\n\t\t\t\t\t\tconsole.log(\"消息发送成功\");\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tstartLogin() {\n\t\t\t// this.socketTask.send({\n\t\t\t// \tdata: \"6\",\n\t\t\t// \tasync success() {\n\t\t\t// \t\tconsole.log(\"消息发送成功\");\n\t\t\t// \t},\n\t\t\t// });\\\n\t\t\tvar that =this \n\t\t\tif(!this.VglobalData.isLogin){\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: \"/pages/login/login\"\n\t\t\t\t})\n\t\t\t} \n\t\t\telse {\n\t\t\t\tuni.request({\n\t\t\t\t\turl:'http://' + this.BASE_URL + '/registerNumber/setRegisterNum',\n\t\t\t\t\tdata: \n\t\t\t\t\t\tthat.VglobalData.userInfo\n\t\t\t\t\t,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tlet $data = res.data\n\t\t\t\t\t\tif( $data.message == 'ok'){\n\t\t\t\t\t\t\tdebugger\n\t\t\t\t\t\t\tthat.newMyRegNum = $data.data.newMyRegNum\n\t\t\t\t\t\t\tthat.socketTask.send({\n\t\t\t\t\t\t\t\tdata: $data.resultMsg,\n\t\t\t\t\t\t\t\tasync success() {\n\t\t\t\t\t\t\t\t\tconsole.log(\"消息发送成功\");\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.$message($data.resultMsg)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t},\n\tcreated() {\n\t\t// this.currentTime = this.getTime()\n\t\t\n\t\t\n\t},\n\tbeforeDestroy() {\n\t\tthis.closeSocket();\n\t},\n\tonLoad() {\n\t\tthis.hasLogin = this.VglobalData.isLogin\n\t\tthis.userName = this.VglobalData.userInfo.userName\n\t\tvar that = this\n\t\tuni.request({\n\t\t\turl: \"http://\"+this.BASE_URL+\"/registerNumber/getRegisterNum\",\n\t\t\tdata: {},\n\t\t\tmethod: 'post',\n\t\t\tsuccess(res) {\n\t\t\t\tif( res.data.message == 'ok'){\n\t\t\t \tthat.RegNum = res.data.data.RegNum\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tthat.$message(res.data.resultMsg)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tthis.connectSocketInit();\n\t}\n}\n","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1589776991100\n      var cssReload = require(\"D:/小程序/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}