{"version":3,"sources":["uni-app:///main.js","webpack:///E:/QLDownload/极简登录注册模板/RgNum/pages/home/home.vue?961d","webpack:///E:/QLDownload/极简登录注册模板/RgNum/pages/home/home.vue?fcbb","webpack:///E:/QLDownload/极简登录注册模板/RgNum/pages/home/home.vue?77c6","webpack:///E:/QLDownload/极简登录注册模板/RgNum/pages/home/home.vue?7686","uni-app:///pages/home/home.vue","webpack:///E:/QLDownload/极简登录注册模板/RgNum/pages/home/home.vue?e059","webpack:///E:/QLDownload/极简登录注册模板/RgNum/pages/home/home.vue?bce2"],"names":["createPage","Page"],"mappings":";;;;;;;;;;;;;;;;;;;;;;kDAAA;AACA;AACA,yF;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AACgN;AAChN,gBAAgB,sNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,6OAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAqzB,CAAgB,2zBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyFz0B;AACA,MADA,kBACA;AACA;AACA,kBADA;AAEA,qBAFA;AAGA,sBAHA;AAIA;AACA,2BALA;AAMA,qBANA;AAOA,eAPA,EAOA;AACA,qBARA,EAQA;AACA,wBATA,EASA;AACA,qBAVA,EAUA;AACA,mBAXA;AAYA,kBAZA;AAaA,sBAbA;AAcA,uBAdA;AAeA;AACA;AACA,mBADA;AAEA,0BAFA;AAGA,sBAHA,EADA;;AAMA;AACA,mBADA;AAEA,2BAFA;AAGA,sBAHA,EANA;;AAWA;AACA,mBADA;AAEA,4BAFA;AAGA,sBAHA,EAXA;;AAgBA;AACA,mBADA;AAEA,4BAFA;AAGA,sBAHA,EAhBA;;AAqBA;AACA,mBADA;AAEA,4BAFA;AAGA,sBAHA,EArBA;;AA0BA;AACA,mBADA;AAEA,4BAFA;AAGA,sBAHA,EA1BA,CAfA;;;;AAgDA,uDAhDA;;;AAmDA,GArDA;AAsDA;AACA,oBADA;AAEA,8BAFA;AAGA,oBAHA;AAIA,wBAJA,EAtDA;;AA4DA,SA5DA,qBA4DA;AACA;AACA;AACA;AACA,KAHA;AAIA,GAjEA;AAkEA;AACA,gBADA,0BACA;AACA;AACA;AACA;AACA;AACA,KANA;AAOA,SAPA,iBAOA,CAPA,EAOA;AACA;AACA,KATA;;AAWA,aAXA,qBAWA,CAXA,EAWA;AACA;AACA;AACA,KAdA;AAeA,gBAfA,wBAeA,KAfA,EAeA;AACA;AACA;AACA,KAlBA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBA7BA,+BA6BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,iBAFA,qBAEA;AACA,4CADA;AAEA,WAJA;;AAMA;AACA;AACA;AACA,SAFA;AAGA,OAdA;AAeA;AACA;AACA;AACA;AACA,KArDA;AAsDA;AACA,eAvDA,yBAuDA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA,SAJA;AAKA,YALA,gBAKA,GALA,EAKA;AACA;AACA,SAPA;;AASA,KAjEA;AAkEA,gBAlEA,0BAkEA;AACA;AACA;AACA;AACA,iCADA;AAEA,iBAFA,qBAEA;AACA,4CADA;AAEA,WAJA;;AAMA;AACA,KA5EA;AA6EA,cA7EA,wBA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCADA;;AAGA,OAJA;AAKA;AACA;AACA;AACA;AACA,iCADA;;AAGA;AACA;AACA,SAPA,MAOA;AACA;AACA,6EADA;AAEA;AACA,yBAHA;;AAKA,0BALA,EAKA,8BALA;AAMA,mBANA,mBAMA,GANA,EAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAHA,MAGA;AACA;AACA;;;AAGA;AACA,kDADA;AAEA,yBAFA,qBAEA;AACA,oDADA;AAEA,mBAJA;;AAMA,eAhBA,MAgBA;AACA;AACA;AACA,aA3BA;;AA6BA;;;AAGA;;AAEA,KAvIA,EAlEA;;AA2MA,SA3MA,qBA2MA;AACA;;;AAGA;AACA,GAhNA;AAiNA,eAjNA,2BAiNA;AACA;AACA,GAnNA;AAoNA,QApNA,oBAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEADA;AAEA,cAFA;AAGA,oBAHA;AAIA,aAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OAXA;;;AAcA,GAxOA,E;;;;;;;;;;;;;;;ACzFA;AAAA;AAAA;AAAA;AAA6pC,CAAgB,koCAAG,EAAC,C;;;;;;;;;;ACAjrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/home/home.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/home/home.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./home.vue?vue&type=template&id=92bb8f34&\"\nvar renderjs\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/home.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=template&id=92bb8f34&\"","var components = {\n  wPicker: function() {\n    return import(\n      /* webpackChunkName: \"components/w-picker/w-picker\" */ \"@/components/w-picker/w-picker.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"img-org\">\r\n\t\t\t<image style=\"margin:auto auto 0;\" src=\"../../static/img/bck.png\" mode=\"\"></image>\r\n\t\t</view>\r\n\t\t<view v-if=\"!hasLogin\" class=\"hello\">\r\n\t\t\t<view class=\"title ul\">\r\n\t\t\t\t您好\r\n\t\t\t</view>\r\n\t\t\t<view class=\"ul\">\r\n\t\t\t\t<view>今日已预约 : {{RegNum}} 人</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<!-- <view class=\"ul\">\r\n\t\t\t\t现在是 : {{currentTime}}\r\n\t\t\t</view>\r\n\t\t\t -->\r\n\t\t\t<!-- <popupData\r\n\t\t\t@close-popup=\"close\"\r\n\t\t\t:openPopup=\"openPopup\"\r\n\t\t\t ></popupData> -->\r\n\t\t\t <w-picker\r\n\t\t\t         mode=\"linkage\"\r\n\t\t\t         :value=\"defaultRegion1\"\r\n\t\t\t         :options=\"options\"\r\n\t\t\t         :level=\"4\"\r\n\t\t\t         default-type=\"id\"\r\n\t\t\t         :default-props=\"defaultProps1\"\r\n\t\t\t         @confirm=\"onConfirm($event,'linkage')\"\r\n\t\t\t         @cancel=\"onCancel\"\r\n\t\t\t         ref=\"linkage\" \r\n\t\t\t     ></w-picker>\r\n\t\t\t \r\n\t\t\t<view class=\"ul\" v-if=\"!hasRGstatus\">\r\n\t\t\t\t<wButton\r\n\t\t\t\t\ttext=\"立即预约\"\r\n\t\t\t\t\t:rotate=\"isRotate\" \r\n\t\t\t\t\t@click.native=\"startLogin()\"\r\n\t\t\t\t\tclass=\"wbutton\"\r\n\t\t\t\t></wButton>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<view v-if=\"hasLogin\" class=\"hello\">\r\n\r\n\t\t\t<view class=\"ul\">\r\n\t\t\t\t<view>今日已预约 : {{RegNum}} 人</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"ul\">\r\n\t\t\t\t<view>您的号码是 : {{newMyRegNum}} 号</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- <template v-if=\"currentTime\"> -->\r\n\t\t\t\t<view class=\"ul\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"currentTime\" placeholder=\"请选择预约时间\"/>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t<!-- </template> -->\r\n\t\t\t<template v-if=\"!currentTime\">\r\n\t\t\t\t<view class=\"ul\"><wButton\r\n\t\t\t\t\t\ttext=\"我的预约\"\r\n\t\t\t\t\t\t:rotate=\"isRotate\" \r\n\t\t\t\t\t\t@click.native=\"startLogin()\"\r\n\t\t\t\t\t\tclass=\"wbutton\"\r\n\t\t\t\t\t></wButton></view>\r\n\t\t\t\t\r\n\t\t\t</template>\r\n\t\t\t<view class=\"ul\">\r\n\t\t\t\t<wButton\r\n\t\t\t\t\ttext=\"立即预约\"\r\n\t\t\t\t\t:rotate=\"isRotate\" \r\n\t\t\t\t\t@click.native=\"startLogin()\"\r\n\t\t\t\t\tclass=\"wbutton\"\r\n\t\t\t\t></wButton>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport wButton from '../../components/watch-login/watch-button.vue'\r\n\timport popupData from \"./popupData/popupData.vue\";\r\n\timport timeSelector from '../../components/xiujun-time-selector/index.vue';\r\n\timport wPicker from '../../components/w-picker/w-picker.vue';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuserName:'',\r\n\t\t\t\tcurrentTime:'',\r\n\t\t\t\tsocketTask: null,\r\n\t\t\t\t// 确保websocket是打开状态\r\n\t\t\t\tis_open_socket: false,\r\n\t\t\t\tisRotate:false,\r\n\t\t\t\tRegNum:0,//挂号人数\r\n\t\t\t\thasLogin:false,//是否为登陆状态\r\n\t\t\t\thasRGstatus:false,//是否为预约成功状态\r\n\t\t\t\tnewMyRegNum:'',//当前用户排号号码\r\n\t\t\t\tstartYear:'',\r\n\t\t\t\tuserInfo:{},\r\n\t\t\t\topenPopup:false,\r\n\t\t\t\tthisIsChecked:[],\r\n\t\t\t\tregNumDataRange:[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel:'01',\r\n\t\t\t\t\t\tvalue:'8:30-9:30',\r\n\t\t\t\t\t\tchecked:false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel:'02',\r\n\t\t\t\t\t\tvalue:'9:30-10:30',\r\n\t\t\t\t\t\tchecked:false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel:'03',\r\n\t\t\t\t\t\tvalue:'10:30-11:30',\r\n\t\t\t\t\t\tchecked:false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel:'04',\r\n\t\t\t\t\t\tvalue:'14:30-15:30',\r\n\t\t\t\t\t\tchecked:false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel:'05',\r\n\t\t\t\t\t\tvalue:'15:30-16:30',\r\n\t\t\t\t\t\tchecked:false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel:'06',\r\n\t\t\t\t\t\tvalue:'16:30-17:30',\r\n\t\t\t\t\t\tchecked:false\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t],\r\n\t\t\t\tweeks:[\"周日\",\"周一\",\"周二\",\"周三\",\"周四\",\"周五\",\"周六\"],\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\twButton,\r\n\t\t\ttimeSelector,\r\n\t\t\twPicker,\r\n\t\t\tpopupData\r\n\t\t},\r\n\t\tupdated() {\r\n\t\t\tthis.socketTask.onMessage((res) => {\r\n\t\t\t\tconsole.log(\"收到服务器内容：\" + res.data);\r\n\t\t\t\tthis.RegNum = res.data\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tclickWpicker(){\r\n\t\t\t\t//打开时间选择框\r\n\t\t\t\t// this.$refs.dataRange.open()\r\n\t\t\t\tthis.$refs.linkage.show()\r\n\t\t\t\tthis.openPopup = true\r\n\t\t\t},\r\n\t\t\tclose(e){\r\n\t\t\t\tthis.openPopup = e\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tonConfirm(e){\r\n\t\t\t\t//时间选择框确认按钮之后\r\n\t\t\t\tthis.currentTime = e.result\r\n\t\t\t},\r\n\t\t\tcheckedInput(index){\r\n\t\t\t\t//选中了当前时间段\r\n\t\t\t\tthis.$set(this.regNumDataRange,this.regNumDataRange[index].checked,true)\r\n\t\t\t},\r\n\t\t\t// getTime: function() {\r\n\t\t\t// \tlet yy = new Date().getFullYear();\r\n\t\t\t// \tlet mm = new Date().getMonth() + 1;\r\n\t\t\t// \tlet dd = new Date().getDate();\r\n\t\t\t// \tlet hh = new Date().getHours();\r\n\t\t\t// \tlet mf = new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();\r\n\t\t\t// \tlet ss = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();\r\n\t\t\t// \treturn yy + '年' + mm + '月' + dd + '日 ' + hh + ':' + mf + ':' + ss;\r\n\t\t\t// },\r\n\t\t\t// 进入这个页面的时候创建websocket连接【整个页面随时使用】\r\n\t\t\tconnectSocketInit() {\r\n\t\t\t\t// 创建一个this.socketTask对象【发送、接收、关闭socket都由这个对象操作】\r\n\t\t\t\tthis.socketTask = this.$socketTask()\r\n\r\n\t\t\t\t// 消息的发送和接收必须在正常连接打开中,才能发送或接收【否则会失败】\r\n\t\t\t\tthis.socketTask.onOpen((res) => {\r\n\t\t\t\t\tconsole.log(\"WebSocket连接正常打开中...！\");\r\n\t\t\t\t\tthis.is_open_socket = true;\r\n\t\t\t\t\t// 注：只有连接正常打开中 ，才能正常成功发送消息\r\n\t\t\t\t\tthis.socketTask.send({\r\n\t\t\t\t\t\tdata: \"uni-app发送一条消息\",\r\n\t\t\t\t\t\tasync success() {\r\n\t\t\t\t\t\t\tconsole.log(\"消息发送成功\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 注：只有连接正常打开中 ，才能正常收到消息\r\n\t\t\t\t\tthis.socketTask.onMessage((res) => {\r\n\t\t\t\t\t\tconsole.log(\"收到服务器内容：\" + res.data);\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t// 这里仅是事件监听【如果socket关闭了会执行】\r\n\t\t\t\t// this.socketTask.onClose(() => {\r\n\t\t\t\t// \tconsole.log(\"已经被关闭了\")\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\t// 关闭websocket【离开这个页面的时候执行关闭】\r\n\t\t\tcloseSocket() {\r\n\t\t\t\tthis.socketTask.close({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tthis.is_open_socket = false;\r\n\t\t\t\t\t\tconsole.log(\"关闭成功\", res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.log(\"关闭失败\", err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclickRequest() {\r\n\t\t\t\tif (this.is_open_socket) {\r\n\t\t\t\t\t// websocket的服务器的原理是:发送一次消息,同时返回一组数据【否则服务器会进去死循环崩溃】\r\n\t\t\t\t\tthis.socketTask.send({\r\n\t\t\t\t\t\tdata: \"请求一次发送一次message\",\r\n\t\t\t\t\t\tasync success() {\r\n\t\t\t\t\t\t\tconsole.log(\"消息发送成功\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartLogin() {\r\n\t\t\t\t// this.socketTask.send({\r\n\t\t\t\t// \tdata: \"6\",\r\n\t\t\t\t// \tasync success() {\r\n\t\t\t\t// \t\tconsole.log(\"消息发送成功\");\r\n\t\t\t\t// \t},\r\n\t\t\t\tdebugger\r\n\t\t\t\t// });\\\r\n\t\t\t\tvar token =uni.getStorageSync('token')\r\n\t\t\t\tvar that =this \r\n\t\t\t\tif(!this.VglobalData.isLogin){\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: \"/pages/login/login\"\r\n\t\t\t\t\t})\r\n\t\t\t\t} \r\n\t\t\t\telse {\r\n\t\t\t\t\tif( !this.currentTime ){\r\n\t\t\t\t\t\tdebugger\r\n\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\turl:'../yuyue/index'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.$message('请选择预约时间')\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl:'http://' + this.BASE_URL + '/registerNumber/setRegisterNum',\r\n\t\t\t\t\t\t\tdata: \r\n\t\t\t\t\t\t\t\tthat.userInfo\r\n\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\tmethod: 'post',header:{accessToken:token},\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tlet $data = res.data\r\n\t\t\t\t\t\t\t\tif( $data.message == 'ok'){\r\n\t\t\t\t\t\t\t\t\tdebugger\r\n\t\t\t\t\t\t\t\t\tif($data.data.result.id!=\"\"){\r\n\t\t\t\t\t\t\t\t\t\tthat.newMyRegNum = $data.data.result.rgNumber\r\n\t\t\t\t\t\t\t\t\t\tthat.hasRGstatus = true\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthat.hasRGstatus = false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthat.socketTask.send({\r\n\t\t\t\t\t\t\t\t\t\tdata: $data.data.result.rgNumber,\r\n\t\t\t\t\t\t\t\t\t\tasync success() {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"消息发送成功\");\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthat.$message($data.resultMsg)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// this.currentTime = this.getTime()\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tthis.socketTask = this.$socketTask()\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\t// this.closeSocket();\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// weekday:weeks[new data().getDay()]\r\n\t\t\tthis.hasLogin = this.VglobalData.isLogin\r\n\t\t\tthis.userName = this.VglobalData.userInfo.userName\r\n\t\t\tthis.userInfo = {...this.VglobalData.userInfo}\r\n\t\t\tvar that = this\r\n\t\t\tuni.request({\r\n\t\t\t\turl: \"http://\"+this.BASE_URL+\"/registerNumber/getRegisterNum\",\r\n\t\t\t\tdata: {},\r\n\t\t\t\tmethod: 'post',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif( res.data.message == 'ok'){\r\n\t\t\t\t \tthat.RegNum = res.data.data.RegNum ? res.data.data.RegNum : 0\r\n\t\t\t\t\tthat.startYear = res.data.data.currentTime.substring(0,4)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.$message(res.data.resultMsg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.content {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\r\n\t}\r\n\r\n\t.hello {\r\n\t\tdisplay: flex;\r\n\t\tflex: 1;\r\n\t\tflex-direction: column;\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t\theight: 100%;\r\n\t\tbackground: rgba(255, 255, 255, .5);\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 30rpx;\r\n\t\talign-items: center\r\n\t}\r\n\r\n\t.img-org {\r\n\t\tposition: absolute;\r\n\t\tz-index: 1;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tright: 0;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.title {\r\n\t\tmargin-top: 25px;\r\n\t}\r\n\r\n\t.ul {\r\n\t\tfont-size: 15px;\r\n\t\tmargin-top: 15px;\r\n\t}\r\n\r\n\t.ul>view {\r\n\t\tline-height: 25px;\r\n\t}\r\n\t\r\n</style>\r\n","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\VueProject\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1600364454260\n      var cssReload = require(\"C:/Users/Administrator/Desktop/VueProject/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}